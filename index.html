<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Generate Your Chinese Ancient Name</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@300;400;600;900&family=Noto+Sans+SC:wght@300;400;700&display=swap" rel="stylesheet">
<style>
  :root {
    --ink:     #2c1a0e;
    --paper:   #f5efe0;
    --red:     #c0392b;
    --gold:    #b8882a;
    --gold-lt: #d4a843;
    --teal:    #2a6b6b;
    --muted:   #8a7560;
    --div:     rgba(184,136,42,0.25);
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }

  html, body {
    background: var(--paper);
  }

  .ink-bg {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: url('Chinese ink painting.png') top center / contain no-repeat;
    opacity: 0.05;
    pointer-events: none;
    z-index: 0;
  }

  body {
    background:
      radial-gradient(ellipse at 50% 0%,  rgba(220,175,165,0.50) 0%, transparent 48%),
      radial-gradient(ellipse at 15% 18%, rgba(215,160,152,0.32) 0%, transparent 42%),
      radial-gradient(ellipse at 85% 12%, rgba(205,155,145,0.22) 0%, transparent 38%),
      radial-gradient(ellipse at 20% 15%, rgba(212,168,67,0.09)  0%, transparent 55%),
      radial-gradient(ellipse at 80% 85%, rgba(192,57,43,0.04)   0%, transparent 55%),
      var(--paper);
    font-family: 'Noto Sans SC', sans-serif;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 24px 16px;
    position: relative;
    overflow-x: hidden;
  }

  .ink-left, .ink-right {
    position: fixed; top: 0; bottom: 0; width: 2px;
    background: linear-gradient(to bottom, transparent, rgba(184,136,42,0.3) 15%, rgba(184,136,42,0.3) 85%, transparent);
    pointer-events: none;
  }
  .ink-left  { left: 28px; }
  .ink-right { right: 28px; }

  .seal {
    position: fixed; width: 50px; height: 50px;
    border: 1.5px solid var(--red);
    display: flex; align-items: center; justify-content: center;
    font-family: 'Noto Serif SC', serif; font-size: 0.58rem;
    color: var(--red); writing-mode: vertical-rl; letter-spacing: 2px;
    opacity: 0.38; pointer-events: none;
  }
  .seal-tl { top: 20px; left: 20px; }
  .seal-br { bottom: 20px; right: 20px; }

  .container { position: relative; z-index: 1; max-width: 620px; width: 100%; }

  .header { text-align: center; margin-bottom: 32px; }

  .header-sub {
    font-family: 'Noto Serif SC', serif; font-size: 0.68rem;
    color: var(--gold); letter-spacing: 0.5em; margin-bottom: 10px; opacity: 0.85;
  }

  h1 {
    font-family: 'Noto Serif SC', serif;
    font-size: clamp(2.2rem, 8vw, 3.6rem); font-weight: 900;
    color: var(--ink); letter-spacing: 0.22em; line-height: 1;
    text-shadow: 1px 1px 0 rgba(184,136,42,0.18); margin-bottom: 10px;
  }

  .header-desc {
    font-family: 'Noto Serif SC', serif; font-size: 0.82rem;
    color: var(--muted); letter-spacing: 0.2em;
  }

  .scroll {
    background: rgba(255,255,255,0.5);
    border-radius: 3px; padding: 40px 36px;
    box-shadow: 0 1px 0 var(--gold), 0 -1px 0 var(--gold),
      0 20px 50px rgba(100,60,20,0.1), inset 0 0 60px rgba(184,136,42,0.04);
  }
  .scroll::before, .scroll::after {
    content: ''; display: block; height: 13px;
    background: linear-gradient(to right, #7a5a10, #c9942a, #f0c060, #c9942a, #7a5a10);
    border-radius: 2px; margin: -40px -36px 32px;
  }
  .scroll::after { margin: 32px -36px -40px; }

  .section-title {
    font-family: 'Noto Serif SC', serif; font-size: 0.66rem;
    letter-spacing: 0.45em; color: var(--muted); text-align: center;
    margin-bottom: 22px; position: relative;
  }
  .section-title::before, .section-title::after {
    content: ''; position: absolute; top: 50%; width: 28%; height: 1px; background: var(--div);
  }
  .section-title::before { left: 0; }
  .section-title::after  { right: 0; }

  .selectors { display: flex; gap: 16px; margin-bottom: 24px; }
  .select-group { flex: 1; }

  label {
    display: block; font-family: 'Noto Serif SC', serif;
    font-size: 0.68rem; color: var(--muted); letter-spacing: 0.35em;
    margin-bottom: 8px; text-align: center;
  }

  select {
    width: 100%; background: rgba(255,255,255,0.8);
    border: 1px solid rgba(184,136,42,0.2); border-bottom: 2px solid var(--gold);
    border-radius: 2px; color: var(--ink); font-family: 'Noto Serif SC', serif;
    font-size: 0.95rem; font-weight: 600; padding: 10px 12px;
    cursor: pointer; outline: none; appearance: none;
    text-align: center; letter-spacing: 0.1em;
    transition: border-color 0.2s, background 0.2s;
  }
  select:focus { background: white; border-bottom-color: var(--red); }
  select option { background: #fff; color: var(--ink); }

  .btn-generate {
    width: 100%; padding: 14px; background: var(--ink); border: none;
    border-radius: 2px; color: var(--gold-lt); font-family: 'Noto Serif SC', serif;
    font-size: 1rem; letter-spacing: 0.55em; cursor: pointer;
    transition: background 0.2s, letter-spacing 0.2s; margin-bottom: 30px;
  }
  .btn-generate:hover { background: #3d2410; letter-spacing: 0.65em; }
  .btn-generate:active { transform: scaleY(0.97); }

  .ornamental-divider {
    text-align: center; font-family: 'Noto Serif SC', serif;
    font-size: 0.9rem; letter-spacing: 0.7em; color: var(--gold); opacity: 0.4; margin: 22px 0;
  }

  .results { display: none; flex-direction: column; gap: 20px; }
  .results.visible { display: flex; animation: unfurl 0.5s ease-out; }
  @keyframes unfurl {
    from { opacity: 0; transform: translateY(10px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  .name-card { border-radius: 2px; padding: 22px 24px; background: rgba(255,255,255,0.45); }
  .name-card.elegant { border: 1px solid rgba(42,107,107,0.32); }
  .name-card.funny   { border: 1px solid rgba(192,57,43,0.28); }

  .card-type {
    font-family: 'Noto Serif SC', serif; font-size: 0.6rem;
    letter-spacing: 0.45em; margin-bottom: 14px; display: flex; align-items: center; gap: 10px;
  }
  .elegant .card-type { color: var(--teal); }
  .funny   .card-type { color: var(--red); }
  .card-type::after { content: ''; flex: 1; height: 1px; }
  .elegant .card-type::after { background: rgba(42,107,107,0.22); }
  .funny   .card-type::after { background: rgba(192,57,43,0.18); }

  .name-main {
    font-family: 'Noto Serif SC', serif;
    font-size: clamp(2rem, 8vw, 3rem); font-weight: 900;
    letter-spacing: 0.28em; line-height: 1; margin-bottom: 10px;
  }
  .elegant .name-main { color: var(--teal); }
  .funny   .name-main { color: var(--red); }

  .name-pinyin { font-size: 0.76rem; color: var(--muted); letter-spacing: 0.12em; margin-bottom: 14px; font-style: italic; }

  .name-meaning {
    font-family: 'Noto Serif SC', serif; font-size: 0.82rem;
    color: var(--ink); line-height: 1.95; padding-left: 14px; letter-spacing: 0.04em;
  }
  .elegant .name-meaning { border-left: 2px solid rgba(42,107,107,0.32); }
  .funny   .name-meaning { border-left: 2px solid rgba(192,57,43,0.25); }

  .name-source { margin-top: 10px; font-size: 0.68rem; color: var(--muted); letter-spacing: 0.18em; opacity: 0.68; }

  .copy-row { margin-top: 14px; text-align: right; }
  .copy-btn {
    background: transparent; border: 1px solid var(--div); border-radius: 2px;
    font-family: 'Noto Serif SC', serif; font-size: 0.68rem; letter-spacing: 0.22em;
    padding: 5px 14px; cursor: pointer; color: var(--muted); transition: border-color 0.2s, color 0.2s;
  }
  .copy-btn:hover { border-color: var(--gold); color: var(--gold); }

  .placeholder {
    text-align: center; color: var(--muted); font-family: 'Noto Serif SC', serif;
    font-size: 0.82rem; letter-spacing: 0.3em; padding: 20px 0; opacity: 0.52;
  }

  /* Fortune reading */
  .fortune-card {
    display: none; margin-top: 20px; padding: 24px;
    background: rgba(255,255,255,0.45); border-radius: 2px;
    border: 1.5px solid var(--gold);
    box-shadow: inset 0 0 30px rgba(184,136,42,0.06);
  }
  .fortune-card.visible { display: block; animation: unfurl 0.5s ease-out; }
  .fortune-title {
    font-family: 'Noto Serif SC', serif; font-size: 0.66rem;
    letter-spacing: 0.45em; color: var(--gold); text-align: center;
    margin-bottom: 18px; position: relative;
  }
  .fortune-title::before, .fortune-title::after {
    content: ''; position: absolute; top: 50%; width: 28%; height: 1px;
    background: rgba(184,136,42,0.35);
  }
  .fortune-title::before { left: 0; }
  .fortune-title::after  { right: 0; }
  .fortune-grid {
    display: grid; grid-template-columns: 1fr 1fr; gap: 14px; margin-bottom: 16px;
  }
  .fortune-item {
    text-align: center; padding: 10px 8px;
    border: 1px solid rgba(184,136,42,0.15); border-radius: 2px;
    background: rgba(255,255,255,0.4);
  }
  .fortune-label {
    font-family: 'Noto Serif SC', serif; font-size: 0.6rem;
    color: var(--muted); letter-spacing: 0.3em; margin-bottom: 6px;
  }
  .fortune-value {
    font-family: 'Noto Serif SC', serif; font-size: 1rem;
    color: var(--ink); font-weight: 600; letter-spacing: 0.15em;
  }
  .fortune-text {
    font-family: 'Noto Serif SC', serif; font-size: 0.82rem;
    color: var(--ink); line-height: 2; letter-spacing: 0.06em;
    padding: 12px 16px; border-left: 2px solid var(--gold);
    background: rgba(184,136,42,0.03);
  }

  /* Share button */
  .share-btn {
    display: inline-block; margin-top: 14px;
    background: transparent; border: 1px solid var(--div); border-radius: 2px;
    font-family: 'Noto Serif SC', serif; font-size: 0.68rem; letter-spacing: 0.22em;
    padding: 5px 14px; cursor: pointer; color: var(--muted); transition: border-color 0.2s, color 0.2s;
  }
  .share-btn:hover { border-color: var(--gold); color: var(--gold); }
  .share-row { margin-top: 14px; text-align: right; }
</style>
</head>
<body>

<div class="ink-bg"></div>
<div class="ink-left"></div>
<div class="ink-right"></div>
<div class="seal seal-tl">å¤é£å</div>
<div class="seal seal-br">ç”Ÿè¾°å½•</div>

<div class="container">
  <div class="header">
    <div class="header-sub">ä»¥ç”Ÿè¾°æ¨å¤å</div>
    <h1>å¤é£åå­—</h1>
    <div class="header-desc">What's Your Chinese Ancient Name?</div>
  </div>

  <div class="scroll">
    <div class="section-title">å¡«å…¥ç”Ÿè¾°</div>
    <div class="selectors">
      <div class="select-group">
        <label>æœˆ Month</label>
        <select id="month">
          <option value="1">ä¸€æœˆ</option><option value="2">äºŒæœˆ</option>
          <option value="3">ä¸‰æœˆ</option><option value="4">å››æœˆ</option>
          <option value="5">äº”æœˆ</option><option value="6">å…­æœˆ</option>
          <option value="7">ä¸ƒæœˆ</option><option value="8">å…«æœˆ</option>
          <option value="9">ä¹æœˆ</option><option value="10">åæœˆ</option>
          <option value="11">åä¸€æœˆ</option><option value="12">åäºŒæœˆ</option>
        </select>
      </div>
      <div class="select-group">
        <label>æ—¥ Date</label>
        <select id="day"></select>
      </div>
    </div>

    <button class="btn-generate" onclick="generate()">æ¨ç®—å¤å</button>

    <div id="placeholder" class="placeholder">è¯·é€‰æ‹©ç”Ÿè¾°ï¼Œä»¥è§‚å¤©å‘½</div>

    <div class="results" id="results">
      <div class="name-card elegant">
        <div class="card-type">é›…å Â· å¤é£</div>
        <div class="name-main" id="elegant-name"></div>
        <div class="name-pinyin" id="elegant-pinyin"></div>
        <div class="name-meaning" id="elegant-meaning"></div>
        <div class="name-source" id="elegant-source"></div>
        <div class="share-row"><button class="share-btn" onclick="shareCard('elegant')">ç”Ÿæˆåå¸–</button></div>
      </div>
      <div class="ornamental-divider">Â· Â· Â·</div>
      <div class="name-card funny">
        <div class="card-type">è¯¨å Â· æç¬‘</div>
        <div class="name-main" id="funny-name"></div>
        <div class="name-pinyin" id="funny-pinyin"></div>
        <div class="name-meaning" id="funny-meaning"></div>
        <div class="name-source" id="funny-source"></div>
        <div class="share-row"><button class="share-btn" onclick="shareCard('funny')">ç”Ÿæˆåå¸–</button></div>
      </div>
    </div>

    <div class="fortune-card" id="fortune-card">
      <div class="fortune-title">å‘½ç†è§£è¯»</div>
      <div class="fortune-grid">
        <div class="fortune-item">
          <div class="fortune-label">æ€§æƒ…</div>
          <div class="fortune-value" id="fort-trait"></div>
        </div>
        <div class="fortune-item">
          <div class="fortune-label">å‘½å±</div>
          <div class="fortune-value" id="fort-element"></div>
        </div>
        <div class="fortune-item">
          <div class="fortune-label">å‰æ–¹</div>
          <div class="fortune-value" id="fort-dir"></div>
        </div>
        <div class="fortune-item">
          <div class="fortune-label">å¹¸æ•°</div>
          <div class="fortune-value" id="fort-num"></div>
        </div>
      </div>
      <div class="fortune-text" id="fort-advice"></div>
    </div>
  </div>
</div>

<script>
const eS = ['æ²ˆ','æ—','æ±Ÿ','äº‘','è§','é¡¾','è°¢','é™†','è‹','ç™½','å­Ÿ','å§œ','å¶','å®‹','å²‘','è£´','æ¸©','å®¹','å‡Œ','ç©†','æ™','å¸','é—»','æ¥š','éœ'];
const fS = ['ç†Š','ç‰›','é©¬','ç¾Š','çŒª','ç‹—','é¸¡','é¾™','é±¼','è™','å…”','è›‡','çŒ«','é¼ ','é©´','ç‹','çŒ´','é¹¿','ç‹¼','èŸ¹'];

const eM = {
  1:{c:['æœªå¤®','åˆæ™—','å‡Œéœ„'],s:'å–è‡ªã€Šè¯—ç»Â·å°é›…Â·åº­ç‡ã€‹ï¼Œæ„ä¸ºå¤œæœªå°½ï¼Œå…‰æœªæ­‡ï¼Œå¯“æ— å°½ç”Ÿæœºã€‚'},
  2:{c:['å¦‚æ•…','èŠ·æ±€','è˜…èŠœ'],s:'å–è‡ªã€Šæ¥šè¾Â·ç¦»éªšã€‹è˜…èŠ·é¦™è‰æ„è±¡ï¼Œå–»é«˜æ´å“æ€§ã€‚'},
  3:{c:['èŠ³è²','ç»¿ç»®','ç¢§æ¾œ'],s:'å–è‡ªã€Šè¯—ç»Â·éƒ‘é£Â·æº±æ´§ã€‹æ˜¥æ°´æ¼«æºªï¼ŒèŠ³è‰è‹è‹ã€‚'},
  4:{c:['æš®è¿Ÿ','çƒŸéœ','äº‘é¬Ÿ'],s:'å–è‡ªæå•†éšã€Šæ— é¢˜ã€‹ï¼Œæ˜¥èš•åˆ°æ­»ä¸æ–¹å°½ï¼Œæ„è•´æ·±è¿œã€‚'},
  5:{c:['æµè¤','ä¸¹å¿ƒ','æ¦´ç«'],s:'å–è‡ªã€Šæ¥šè¾Â·ä¹æ­Œã€‹ï¼Œå¤å¤œè¤ç«ï¼Œå¿ å¿ƒä¸æ¸ä¹‹æ„ã€‚'},
  6:{c:['è·é£','æ¼ªæ¾œ','ç¿ å¾®'],s:'å–è‡ªç‹ç»´ã€Šå±±å±…ç§‹æšã€‹ï¼Œè·å¶ç”Ÿé£ï¼Œæ¸…å‡‰å‡ºå°˜ã€‚'},
  7:{c:['ä¸ƒå¤•','é“¶æ±‰','æ˜Ÿæ¸š'],s:'å–è‡ªç§¦è§‚ã€Šé¹Šæ¡¥ä»™ã€‹é“¶æ±‰è¿¢è¿¢æš—æ¸¡ï¼Œæƒ…æ·±æ„é•¿ã€‚'},
  8:{c:['æ¡‚é­„','ç´ è¾‰','æœ›èˆ’'],s:'å–è‡ªã€Šæ¥šè¾ã€‹å‰æœ›èˆ’ä½¿å…ˆé©±å…®ï¼Œæœˆç¥å¾¡é£ä¹‹æ„ã€‚'},
  9:{c:['éœœåº','èŠéš','ç§‹å®'],s:'å–è‡ªé™¶æ¸Šæ˜ã€Šé¥®é…’ã€‹ï¼Œé‡‡èŠä¸œç¯±ï¼Œæ‚ ç„¶è§å—å±±ã€‚'},
  10:{c:['å¯’ç¢§','æ«çµ®','å½’é¸¿'],s:'å–è‡ªã€Šè¯—ç»Â·è±³é£Â·ä¸ƒæœˆã€‹ç§‹æ—¥å½’é€”ï¼Œéœœå¶å¦‚ç«ã€‚'},
  11:{c:['æš®é›ª','ç´ èŠ‚','å‡›éŸ³'],s:'å–è‡ªå²‘å‚ã€Šç™½é›ªæ­Œã€‹ï¼Œç€šæµ·é˜‘å¹²ç™¾ä¸ˆå†°ï¼Œæ„äº‘æƒ¨æ·¡ã€‚'},
  12:{c:['æ¢…éª¨','å²å¯’','ç´ å¿ƒ'],s:'å–è‡ªç‹å®‰çŸ³ã€Šæ¢…èŠ±ã€‹ï¼Œå‡Œå¯’ç‹¬è‡ªå¼€ï¼Œæš—é¦™æµ®åŠ¨ã€‚'},
};

const fM = {
  1:{c:['å†»è„š','æ‰“ç›¹','è£¹è¢«'],m:'ç”Ÿäºä¸¥å†¬ï¼Œå¤©å‘½éš¾é€ƒï¼Œè„šå†»æ‰‹åƒµï¼Œæ­¤ä¹ƒå¤©æ„ã€‚'},
  2:{c:['ç­‰æ˜¥','ç›¼é¥­','å€¦çœ '],m:'äºŒæœˆå°†å°½ï¼Œæ˜¥ä»ä¸æ¥ï¼Œæ»¡å¿ƒæœŸç›¼ï¼Œé¥¥è‚ è¾˜è¾˜ã€‚'},
  3:{c:['å›°è§‰','æ‰“å–·','æ‰çœ¼'],m:'æ˜¥å›°ç§‹ä¹ï¼Œæ­¤ä¹ƒå¤è®­ï¼Œç”Ÿäºä¸‰æœˆï¼Œå‘½ä¸­å¸¦å›°ã€‚'},
  4:{c:['è¸æ°´','æ·‹å¤´','æ¹¿è¡£'],m:'å››æœˆæ¸…æ˜ï¼Œé›¨æ°´è¿ç»µï¼Œå‡ºé—¨å¿…æ¹¿ï¼Œå‘½ä¹Ÿå¦‚æ­¤ã€‚'},
  5:{c:['æ‰èšŠ','æŒ¥æ‰‡','èºçƒ­'],m:'äº”æœˆåˆå¤ï¼ŒèšŠè™«çŒ–ç—ï¼Œæ‰‹æŒè’²æ‰‡ï¼Œåç«‹ä¸å®‰ã€‚'},
  6:{c:['æ±—é¢œ','é»è¡£','çƒ«è„š'],m:'å…­æœˆç››å¤ï¼Œæ±—æµæµƒèƒŒï¼Œåœ°ç –çƒ«è„šï¼Œæ­¤å‘½ä¸æ˜“ã€‚'},
  7:{c:['å¹ç©º','å–å†°','æ™’è”«'],m:'ä¸ƒæœˆæµç«ï¼Œé ç©ºè°ƒç»­å‘½ï¼Œå†°é¥®ä¸ºä¼´ï¼Œè”«ç„¶åº¦æ—¥ã€‚'},
  8:{c:['æ‰è‚š','é¥±å—','è´ªé£Ÿ'],m:'å…«æœˆä¸­ç§‹ï¼Œæœˆé¥¼å½“å‰ï¼ŒæŠŠæŒä¸ä½ï¼Œè…¹é¥±è€Œçœ ã€‚'},
  9:{c:['æ‰å¶','æ‰“å–·','ç©¿å¤š'],m:'ä¹æœˆç§‹å‡‰ï¼Œå†·çƒ­ä¸å‡ï¼Œå–·åšé¢‘å‘ï¼Œè¡£æœç©¿å¤šã€‚'},
  10:{c:['ç¼©è„–','æ£æ‰‹','èœ·èº«'],m:'åæœˆåˆå¯’ï¼Œç¼©é¢ˆè—æ‰‹ï¼Œèœ·èº«å–æš–ï¼Œå½¢å¦‚è™¾ç±³ã€‚'},
  11:{c:['æ‡’èµ·','èµ–åºŠ','ç£¨è¹­'],m:'åä¸€æœˆä¸¥å¯’ï¼Œè¢«çªæ¸©æš–ï¼Œèµ·åºŠä¸€äº‹ï¼Œéš¾äºç™»å¤©ã€‚'},
  12:{c:['å†»è€³','å‘µæ°”','æºœå†°'],m:'è…Šæœˆä¸¥å†¬ï¼Œå‘µæ°”æˆé›¾ï¼Œè€³æœµé€šçº¢ï¼Œè·¯æ»‘å¦‚å†°ã€‚'},
};

const f2 = ['','å—','æ‰“','æŒ ','è¶´','æ‡µ','å‚»','æ™•','å›§','æ„£','è’™','å‘†','å›°','æ€‚','èºº','é¢¤','æ™ƒ','è”«','ç³Š','è¿·','æ…Œ','å’£','æ‰‘','æ‘”','æ»š','æ‡’','æ’’','æ‹–','ç£¨','è´ª','é—¹','å“­'];

const epy = {'æœªå¤®':'wÃ¨i yÄng','åˆæ™—':'chÅ« hÃ¡n','å‡Œéœ„':'lÃ­ng xiÄo','å¦‚æ•…':'rÃº gÃ¹','èŠ·æ±€':'zhÇ tÄ«ng','è˜…èŠœ':'hÃ©ng wÃº','èŠ³è²':'fÄng fÄ“i','ç»¿ç»®':'lÇœ qÇ','ç¢§æ¾œ':'bÃ¬ lÃ¡n','æš®è¿Ÿ':'mÃ¹ chÃ­','çƒŸéœ':'yÄn xiÃ¡','äº‘é¬Ÿ':'yÃºn huÃ¡n','æµè¤':'liÃº yÃ­ng','ä¸¹å¿ƒ':'dÄn xÄ«n','æ¦´ç«':'liÃº huÇ’','è·é£':'hÃ© fÄ“ng','æ¼ªæ¾œ':'yÄ« lÃ¡n','ç¿ å¾®':'cuÃ¬ wÄ“i','ä¸ƒå¤•':'qÄ« xÄ«','é“¶æ±‰':'yÃ­n hÃ n','æ˜Ÿæ¸š':'xÄ«ng zhÇ”','æ¡‚é­„':'guÃ¬ pÃ²','ç´ è¾‰':'sÃ¹ huÄ«','æœ›èˆ’':'wÃ ng shÅ«','éœœåº':'shuÄng xÃ¹','èŠéš':'jÃº yÇn','ç§‹å®':'qiÅ« shÃ­','å¯’ç¢§':'hÃ¡n bÃ¬','æ«çµ®':'fÄ“ng xÃ¹','å½’é¸¿':'guÄ« hÃ³ng','æš®é›ª':'mÃ¹ xuÄ›','ç´ èŠ‚':'sÃ¹ jiÃ©','å‡›éŸ³':'lÇn yÄ«n','æ¢…éª¨':'mÃ©i gÇ”','å²å¯’':'suÃ¬ hÃ¡n','ç´ å¿ƒ':'sÃ¹ xÄ«n'};

const spy = {'æ²ˆ':'shÄ›n','æ—':'lÃ­n','æ±Ÿ':'jiÄng','äº‘':'yÃºn','è§':'xiÄo','é¡¾':'gÃ¹','è°¢':'xiÃ¨','é™†':'lÃ¹','è‹':'sÅ«','ç™½':'bÃ¡i','å­Ÿ':'mÃ¨ng','å§œ':'jiÄng','å¶':'yÃ¨','å®‹':'sÃ²ng','å²‘':'cÃ©n','è£´':'pÃ©i','æ¸©':'wÄ“n','å®¹':'rÃ³ng','å‡Œ':'lÃ­ng','ç©†':'mÃ¹','æ™':'yÃ n','å¸':'sÄ«','é—»':'wÃ©n','æ¥š':'chÇ”','éœ':'huÃ²'};

const mngs = {'æœªå¤®':'æœªå°½ä¹‹æ„ï¼Œé•¿å¤œå°†é˜‘ï¼Œå…‰æ˜å°†è‡³ã€‚å«æ— é™ç”Ÿæœºã€å‰ç¨‹å¹¿é˜”ä¹‹å¯“ã€‚','åˆæ™—':'æ™¨æ›¦åˆç»½ï¼Œå«å…‰è€Œç¬‘ã€‚å¯“åˆå¿ƒä¸æ”¹ã€æœæ°”è“¬å‹ƒã€‚','å‡Œéœ„':'å‡Œäº‘å£®å¿—ï¼Œç›´ä¸Šéœ„æ±‰ï¼Œä¸ä¸ºä¿—å°˜æ‰€ç¾ã€‚','å¦‚æ•…':'ç»å¹´å¦‚æ—§ï¼Œæƒ…æ·±æ„ç¬ƒï¼Œå¦‚åˆè§èˆ¬æ¸©æŸ”ã€‚','èŠ·æ±€':'ç™½èŠ·ç”Ÿäºæ°´ç•”ï¼Œæ¸…é¦™è¿œæº¢ï¼Œå“æ€§é«˜æ´ã€‚','è˜…èŠœ':'é¦™è‰ç¹èŒ‚ï¼Œå‡ºè‡ªã€Šç¦»éªšã€‹ï¼Œæ¯”å›å­ä¹‹å¾·ã€‚','èŠ³è²':'æ˜¥èŠ±çƒ‚æ¼«ï¼ŒèŠ¬èŠ³é¦¥éƒï¼Œç”Ÿæœºç›ç„¶ä¹‹è±¡ã€‚','ç»¿ç»®':'å¤ç´ä¹‹åï¼ŒéŸ³è‰²æ¸…è¶Šï¼Œå¯“æ‰åæ¨ªæº¢ã€‚','ç¢§æ¾œ':'ç¢§æ°´æ¶Ÿæ¼ªï¼Œæ¸…æ¾ˆè§åº•ï¼Œå¿ƒå¢ƒæ¾„æ˜ã€‚','æš®è¿Ÿ':'æš®è‰²å°†è‡³ï¼Œæ‚ ç„¶è‡ªå¾—ï¼Œä¸æ…Œä¸å¿™ä¹‹æ€ã€‚','çƒŸéœ':'äº‘çƒŸéœå…‰ï¼Œç¼¥ç¼ˆå‡ºå°˜ï¼Œæ„å¢ƒæ·±è¿œã€‚','äº‘é¬Ÿ':'äº‘é¬Ÿé›¾é¬“ï¼Œå©‰çº¦æŸ”ç¾ï¼Œè¯—æ„æµè½¬ã€‚','æµè¤':'è¤ç«ç‚¹ç‚¹ï¼Œå¤å¤œæµå…‰ï¼Œç”Ÿå‘½è™½å¾®ï¼Œå…‰äº¦ç’€ç’¨ã€‚','ä¸¹å¿ƒ':'èµ¤èƒ†å¿ å¿ƒï¼Œçƒ­è¡€æŠ¥å›½ï¼Œå‡ºè‡ªæ–‡å¤©ç¥¥ã€Šè¿‡é›¶ä¸æ´‹ã€‹ã€‚','æ¦´ç«':'çŸ³æ¦´å¦‚ç«ï¼Œçƒ­çƒˆç››æ”¾ï¼Œç”Ÿå‘½åŠ›æ—ºç››ã€‚','è·é£':'è·å¶ç”°ç”°ï¼Œæ¸…é£å¾æ¥ï¼Œä¸€æ´¾æ¸…å‡‰å‡ºå°˜ã€‚','æ¼ªæ¾œ':'æ°´æ³¢è¡æ¼¾ï¼Œå±‚å±‚é€’è¿›ï¼Œå¦‚å¿ƒå¢ƒä¹‹å®½å¹¿ã€‚','ç¿ å¾®':'å±±è‰²é’ç¿ ï¼Œäº‘é›¾ç¼¥ç¼ˆï¼Œæ„å¢ƒæ‚ è¿œã€‚','ä¸ƒå¤•':'æ˜Ÿæ²³ç¿çƒ‚ï¼Œæƒ…æ·±ä¹‰é‡ï¼Œç‰›å¥³ç›¸ä¼šä¹‹å¤œã€‚','é“¶æ±‰':'é“¶æ²³æµ©æ¸ºï¼Œæ˜Ÿå…‰ä¸‡é‡Œï¼Œèƒ¸æ€€å®‡å®™ä¹‹å¿—ã€‚','æ˜Ÿæ¸š':'æ˜Ÿæ²³æ´²æ¸šï¼Œå¤©æ°´ç›¸æ¥ï¼Œå‡ºå°˜è„±ä¿—ä¹‹å¢ƒã€‚','æ¡‚é­„':'æœˆä¹‹é­‚é­„ï¼Œæ¡‚é¦™æµ®åŠ¨ï¼Œæ¸…è¾‰ä¸‡é‡Œã€‚','ç´ è¾‰':'ç´ æ´ä¹‹å…‰ï¼Œçšçšæ˜æœˆï¼Œå¿ƒåœ°çº¯å‡€ã€‚','æœ›èˆ’':'æœˆç¥ä¹‹åï¼Œå‡ºè‡ªã€Šæ¥šè¾ã€‹ï¼Œé©¾æœˆå¾¡é£ã€‚','éœœåº':'éœœé™æ—¶åºï¼Œå¤©é«˜æ°”çˆ½ï¼Œç§‹ä¹‹è‚ƒç©†ã€‚','èŠéš':'èŠèŠ±éšäºä¸œç¯±ï¼Œä¸äº‰ç¹åï¼Œè‡ªæœ‰é£éª¨ã€‚','ç§‹å®':'ç§‹æ—¥ç¡•æœï¼Œç§¯ç´¯æœ‰æˆï¼Œè¸å®åšé‡ä¹‹æ„ã€‚','å¯’ç¢§':'å¯’æ°´ç¢§æ¾„ï¼Œæ¸…å†½æ¾„æ¾ˆï¼Œå¯’ä¸­è§æ¸…ã€‚','æ«çµ®':'æ«å¶å¦‚ç«ï¼Œéšé£é£˜çµ®ï¼Œè‡ªåœ¨æ´’è„±ã€‚','å½’é¸¿':'å½’é›ä¼ ä¹¦ï¼Œæ€ä¹¡æƒ…åˆ‡ï¼Œæ¸¸å­å½’é€”ã€‚','æš®é›ª':'æš®è‰²è‹èŒ«ï¼Œå¤§é›ªçº·é£ï¼Œé™è°§è‚ƒç©†ã€‚','ç´ èŠ‚':'ç´ é›…èŠ‚æ“ï¼Œå†¬æ—¥ä¹‹å¿—ï¼Œæ´ç™½å¦‚é›ªã€‚','å‡›éŸ³':'å‡›å†½ä¹‹éŸ³ï¼Œç©¿é€éœœé›ªï¼Œæ¸…è¶Šé«˜è¿œã€‚','æ¢…éª¨':'æ¢…èŠ±é£éª¨ï¼Œå‡Œå¯’å‚²é›ªï¼Œä¸å±ˆä¹‹å¿—ã€‚','å²å¯’':'å²æš®å¤©å¯’ï¼Œæ¾ç«¹æ¢…ä¹ƒå²å¯’ä¸‰å‹ï¼Œé«˜æ´è‡ªå®ˆã€‚','ç´ å¿ƒ':'ç´ å‡€ä¹‹å¿ƒï¼Œä¸æŸ“å°˜åŸƒï¼Œçº¯çœŸæœ¬æ€§ã€‚'};

const monthSel = document.getElementById('month');
const daySel   = document.getElementById('day');
const nums = ['ä¸€','äºŒ','ä¸‰','å››','äº”','å…­','ä¸ƒ','å…«','ä¹','å','åä¸€','åäºŒ','åä¸‰','åå››','åäº”','åå…­','åä¸ƒ','åå…«','åä¹','äºŒå','äºŒåä¸€','äºŒåäºŒ','äºŒåä¸‰','äºŒåå››','äºŒåäº”','äºŒåå…­','äºŒåä¸ƒ','äºŒåå…«','äºŒåä¹','ä¸‰å','ä¸‰åä¸€'];

function populateDays() {
  const m = parseInt(monthSel.value);
  const count = new Date(2024, m, 0).getDate();
  const cur = parseInt(daySel.value) || 1;
  daySel.innerHTML = '';
  for (let i = 1; i <= count; i++) {
    const o = document.createElement('option');
    o.value = i; o.textContent = nums[i-1] + 'æ—¥';
    if (i === cur) o.selected = true;
    daySel.appendChild(o);
  }
}
monthSel.addEventListener('change', populateDays);
populateDays();

function r(seed) { return Math.abs(Math.sin(seed + 1) * 10000) % 1; }

function generate() {
  const month = parseInt(monthSel.value);
  const day   = parseInt(daySel.value);
  const seed  = month * 100 + day;

  const ed   = eM[month];
  const esur = eS[Math.floor(r(seed) * eS.length)];
  const ech  = ed.c[Math.floor(r(seed+7) * ed.c.length)];

  const fd   = fM[month];
  const fsur = fS[Math.floor(r(seed+13) * fS.length)];
  const fc   = fd.c[Math.floor(r(seed+5) * fd.c.length)];
  const fc2  = f2[day] || f2[(day%10)+1];
  const fdbl = fc[0] + fc2;

  document.getElementById('placeholder').style.display = 'none';
  document.getElementById('elegant-name').textContent    = esur + ech;
  document.getElementById('elegant-pinyin').textContent  = (spy[esur]||esur) + ' Â· ' + (epy[ech]||'');
  document.getElementById('elegant-meaning').textContent = 'ã€Œ' + ech + 'ã€' + (mngs[ech]||'æ„å¢ƒæ·±è¿œï¼Œå«è“„è•´è—‰ï¼Œè€äººå¯»å‘³ã€‚');
  document.getElementById('elegant-source').textContent  = ed.s;
  document.getElementById('funny-name').textContent      = fsur + fdbl;
  document.getElementById('funny-pinyin').textContent    = 'åå¦‚å…¶äººï¼Œæ— éœ€æ³¨éŸ³';
  document.getElementById('funny-meaning').textContent   = 'ã€Œ' + fdbl + 'ã€' + fd.m;
  document.getElementById('funny-source').textContent    = 'å–è‡ªæ°‘é—´å£è€³ç›¸ä¼ ï¼Œä¸è§ç»ä¼ ï¼Œå´æ·±å…¥äººå¿ƒã€‚';

  const res = document.getElementById('results');
  res.classList.remove('visible');
  void res.offsetWidth;
  res.classList.add('visible');

  // Fortune reading
  showFortune(seed, month, day);
}

/* â”€â”€ Fortune Reading â”€â”€ */
const traits = ['æ¸©æ¶¦å¦‚ç‰','åˆšæ¯…æœæ•¢','èªæ…§çµç§€','è±è¾¾å¼€æœ—','æ²‰ç¨³å†…æ•›','çƒ­æƒ…å¥”æ”¾','ç»†è…»æ•æ„Ÿ','æ´’è„±ä¸ç¾','ä»åšå®½å’Œ','æœºæ•å–„è¾©','æ·¡æ³Šä»å®¹','åšéŸ§ä¸æ‹”'];
const elements = ['é‡‘','æœ¨','æ°´','ç«','åœŸ'];
const elemIcons = ['ğŸœ','ğŸœ‚','ğŸœ„','ğŸœƒ','ğŸœ…'];
const dirs = ['ä¸œæ–¹','è¥¿æ–¹','å—æ–¹','åŒ—æ–¹','ä¸œå—','è¥¿å—','ä¸œåŒ—','è¥¿åŒ—'];
const advices = [
  'å®œé™å¿ƒè¯»ä¹¦ï¼Œä¿®èº«å…»æ€§ï¼Œæ–¹èƒ½åšç§¯è–„å‘ã€‚',
  'è´µäººåœ¨è¿œæ–¹ï¼Œè¡Œä¸‡é‡Œè·¯ï¼Œè§å¤©åœ°ä¹‹å¹¿å¤§ã€‚',
  'å®ˆæ‹™è—é”‹ï¼Œå¾…æ—¶è€ŒåŠ¨ï¼Œå¤§å™¨å¯æœŸã€‚',
  'å®œå¹¿ç»“å–„ç¼˜ï¼Œä»¥è¯šå¾…äººï¼Œç¦æŠ¥è‡ªæ¥ã€‚',
  'å‹¿æ€¥å‹¿èºï¼Œç¼“åˆ™åœ†ï¼Œä»å®¹åº”ä¸‡å˜ã€‚',
  'å®œä¹ ä¸€æŠ€ä¹‹é•¿ï¼Œç²¾ç›Šæ±‚ç²¾ï¼Œååˆ©è‡ªè‡³ã€‚',
  'å¿ƒå­˜æ„Ÿæ©ï¼ŒçŸ¥è¶³å¸¸ä¹ï¼Œå¹³å®‰å³ç¦ã€‚',
  'é€¢å±±å¼€è·¯ï¼Œé‡æ°´æ­æ¡¥ï¼Œå›°å¢ƒçš†æ˜¯å†ç»ƒã€‚',
  'å®œæ—©èµ·æ™šå½’ï¼Œå‹¤å‹‰ä¸ºæœ¬ï¼Œå¤©é“é…¬å‹¤ã€‚',
  'è´µåœ¨åšæŒï¼Œæ°´æ»´çŸ³ç©¿ï¼Œç»ˆæˆå¤§äº‹ã€‚',
  'ç‹¬å¤„æ—¶å…»å¿ƒï¼Œç¾¤å¤„æ—¶å…»å£ï¼Œä¿®å¿ƒä¸ºè¦ã€‚',
  'å®œäº²è¿‘è‡ªç„¶ï¼Œå±±æ°´ä¹‹é—´ï¼Œçµæ„Ÿè‡ªç”Ÿã€‚',
];

function showFortune(seed, month, day) {
  const s = seed;
  const trait = traits[Math.floor(r(s + 31) * traits.length)];
  const elemIdx = Math.floor(r(s + 41) * elements.length);
  const dir = dirs[Math.floor(r(s + 53) * dirs.length)];
  const luckyNum = Math.floor(r(s + 67) * 9) + 1;
  const advice = advices[Math.floor(r(s + 79) * advices.length)];

  document.getElementById('fort-trait').textContent = trait;
  document.getElementById('fort-element').textContent = elements[elemIdx];
  document.getElementById('fort-dir').textContent = dir;
  document.getElementById('fort-num').textContent = luckyNum;
  document.getElementById('fort-advice').textContent =
    'ç”Ÿäº' + month + 'æœˆ' + day + 'æ—¥ï¼Œæ€§å±ã€Œ' + trait + 'ã€ï¼Œå‘½å±ã€Œ' + elements[elemIdx] + 'ã€è¡Œã€‚' + advice;

  const fc = document.getElementById('fortune-card');
  fc.classList.remove('visible');
  void fc.offsetWidth;
  fc.classList.add('visible');
}

/* â”€â”€ Share as Image â”€â”€ */
function shareCard(type) {
  const name = document.getElementById(type + '-name').textContent;
  const pinyin = document.getElementById(type + '-pinyin').textContent;
  const meaning = document.getElementById(type + '-meaning').textContent;
  const source = document.getElementById(type + '-source').textContent;
  const isElegant = type === 'elegant';

  const W = 600, H = 780;
  const cvs = document.createElement('canvas');
  cvs.width = W; cvs.height = H;
  const ctx = cvs.getContext('2d');

  // Background
  ctx.fillStyle = '#f5efe0';
  ctx.fillRect(0, 0, W, H);

  // Subtle gradient overlay
  const grd = ctx.createRadialGradient(W/2, 0, 0, W/2, 0, W);
  grd.addColorStop(0, 'rgba(220,175,165,0.3)');
  grd.addColorStop(1, 'transparent');
  ctx.fillStyle = grd;
  ctx.fillRect(0, 0, W, H);

  // Decorative border
  const accent = isElegant ? '#2a6b6b' : '#c0392b';
  ctx.strokeStyle = '#b8882a';
  ctx.lineWidth = 3;
  ctx.strokeRect(24, 24, W - 48, H - 48);
  ctx.strokeStyle = 'rgba(184,136,42,0.3)';
  ctx.lineWidth = 1;
  ctx.strokeRect(32, 32, W - 64, H - 64);

  // Gold bar top and bottom
  const barGrd = ctx.createLinearGradient(40, 0, W - 40, 0);
  barGrd.addColorStop(0, '#7a5a10');
  barGrd.addColorStop(0.3, '#c9942a');
  barGrd.addColorStop(0.5, '#f0c060');
  barGrd.addColorStop(0.7, '#c9942a');
  barGrd.addColorStop(1, '#7a5a10');
  ctx.fillStyle = barGrd;
  ctx.fillRect(40, 40, W - 80, 10);
  ctx.fillRect(40, H - 50, W - 80, 10);

  // Card type label
  ctx.font = '16px "Noto Serif SC", serif';
  ctx.fillStyle = accent;
  ctx.textAlign = 'center';
  ctx.fillText(isElegant ? 'é›… å Â· å¤ é£' : 'è¯¨ å Â· æ ç¬‘', W/2, 90);

  // Name (large)
  ctx.font = '900 72px "Noto Serif SC", serif';
  ctx.fillStyle = accent;
  ctx.fillText(name, W/2, 200);

  // Pinyin
  ctx.font = 'italic 18px "Noto Serif SC", serif';
  ctx.fillStyle = '#8a7560';
  ctx.fillText(pinyin, W/2, 240);

  // Divider line
  ctx.beginPath();
  ctx.moveTo(W/2 - 80, 268);
  ctx.lineTo(W/2 + 80, 268);
  ctx.strokeStyle = 'rgba(184,136,42,0.4)';
  ctx.lineWidth = 1;
  ctx.stroke();

  // Meaning (wrapped text)
  ctx.font = '18px "Noto Serif SC", serif';
  ctx.fillStyle = '#2c1a0e';
  ctx.textAlign = 'left';
  wrapText(ctx, meaning, 60, 310, W - 120, 32);

  // Source
  ctx.font = '14px "Noto Serif SC", serif';
  ctx.fillStyle = '#8a7560';
  ctx.globalAlpha = 0.7;
  ctx.textAlign = 'left';
  wrapText(ctx, source, 60, 520, W - 120, 26);
  ctx.globalAlpha = 1;

  // Seal stamp
  const sealSize = 56;
  const sx = W - 90, sy = H - 120;
  ctx.save();
  ctx.translate(sx, sy);
  ctx.rotate(-0.15);
  ctx.strokeStyle = accent;
  ctx.lineWidth = 2;
  ctx.globalAlpha = 0.5;
  ctx.strokeRect(-sealSize/2, -sealSize/2, sealSize, sealSize);
  ctx.font = '600 14px "Noto Serif SC", serif';
  ctx.fillStyle = accent;
  ctx.textAlign = 'center';
  ctx.textBaseline = 'middle';
  ctx.fillText(isElegant ? 'å¤é£' : 'è¯¨å', 0, -8);
  ctx.fillText(isElegant ? 'é›…å' : 'æç¬‘', 0, 12);
  ctx.globalAlpha = 1;
  ctx.restore();

  // Watermark
  ctx.font = '12px "Noto Serif SC", serif';
  ctx.fillStyle = 'rgba(138,117,96,0.4)';
  ctx.textAlign = 'center';
  ctx.fillText('å¤é£åå­— Â· ä»¥ç”Ÿè¾°æ¨å¤å', W/2, H - 65);

  // Download
  const link = document.createElement('a');
  link.download = name + '-åå¸–.png';
  link.href = cvs.toDataURL('image/png');
  link.click();
}

function wrapText(ctx, text, x, y, maxW, lineH) {
  let line = '';
  let cy = y;
  for (let i = 0; i < text.length; i++) {
    const test = line + text[i];
    if (ctx.measureText(test).width > maxW && line) {
      ctx.fillText(line, x, cy);
      line = text[i];
      cy += lineH;
    } else {
      line = test;
    }
  }
  if (line) ctx.fillText(line, x, cy);
}


</script>
</body>
</html>
